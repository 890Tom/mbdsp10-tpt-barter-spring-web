<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Back Office - Barter</title>
    <!-- plugins:css -->
	<link rel="stylesheet" th:href="@{/vendors/feather/feather.css}">
	<link rel="stylesheet" th:href="@{/vendors/mdi/css/materialdesignicons.min.css}">
	<link rel="stylesheet" th:href="@{/vendors/ti-icons/css/themify-icons.css}">
	<link rel="stylesheet" th:href="@{/vendors/typicons/typicons.css}">
	<link rel="stylesheet" th:href="@{/vendors/simple-line-icons/css/simple-line-icons.css}">
	<link rel="stylesheet" th:href="@{/vendors/css/vendor.bundle.base.css}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
	<link rel="stylesheet" th:href="@{/vendors/datatables.net-bs4/dataTables.bootstrap4.css}">
	<link rel="stylesheet" th:href="@{/js/select.dataTables.min.css}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" th:href="@{css/vertical-layout-light/style.css}">
    <!-- endinject -->
    <link rel="stylesheet" th:href="@{/css/vertical-layout-light/style.css}">

    <!-- Personal CSS -->
    <link rel="stylesheet" th:href="@{/css/personal.css}" />
</head>

<body class="sidebar-dark">
    <div class="container-scroller">

        <!-- partial:partials/_navbar.html -->
		<div th:replace="~{fragments/header :: header}">&nbsp;</div>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            
            <!-- partial -->
			<div th:replace="~{fragments/navbar :: navbar}">&nbsp;</div>
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
					<!--<div th:replace="~{::main-content}">
	                     This is where the dynamic content will be inserted 
	                </div>-->
					<div class="row">
					            <div class="col-sm-12">
					              <div class="home-tab">
					                <div class="d-sm-flex align-items-center justify-content-between border-bottom">
					                  <ul class="nav nav-tabs" role="tablist">
					                    <li class="nav-item">
					                      <a class="nav-link active ps-0" id="home-tab" data-bs-toggle="tab" href="#overview" role="tab"
					                        aria-controls="overview" aria-selected="true">Overview</a>
					                    </li>
					                  </ul>
					                  <div>
					                    <div class="btn-wrapper">
					                      <a href="#" class="btn btn-otline-dark align-items-center"><i class="icon-share"></i> Share</a>
					                      <a href="#" class="btn btn-otline-dark"><i class="icon-printer"></i> Print</a>
					                      <a href="#" class="btn btn-primary text-white me-0"><i class="icon-download"></i> Export</a>
					                    </div>
					                  </div>
					                </div>
					                <div class="tab-content tab-content-basic">
					                  <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview">
					                    <div class="row">
					                      <div class="col-sm-12">
					                        <div class="statistics-details d-flex align-items-center justify-content-between">
					                          <div>
					                            <p class="statistics-title">Daily exchanges</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.dailyExchange}"></h3>
					                          </div>
					                          <div>
					                            <p class="statistics-title">Pending reports</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.pending}"></h3>
					                          </div>
					                          <div>
					                            <p class="statistics-title">Accepted reports</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.accepted}"></h3>
					                          </div>
					                          <div class="d-none d-md-block">
					                            <p class="statistics-title">Refused reports</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.rejected}"></h3>
					                          </div>
					                          <div class="d-none d-md-block">
					                            <p class="statistics-title">Users</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.usersCount}"></h3>
					                          </div>
					                          <div class="d-none d-md-block">
					                            <p class="statistics-title">Failed exchange</p>
					                            <h3 class="rate-percentage" th:text="${countInsights.failedExchange}"></h3>
					                          </div>
					                        </div>
					                      </div>
					                    </div>
					                    <div class="row">
					                      <div class="col-lg-12 d-flex flex-column">
					                        <div class="row flex-grow">
					                          <div class="col-12 col-lg-4 col-lg-12 grid-margin stretch-card">
					                            <div class="card card-rounded">
					                              <div class="card-body">
					                                <div class="d-sm-flex justify-content-between align-items-start">
					                                  <div>
					                                    <h4 class="card-title card-title-dash">Last 14 days Exchanges</h4>
					                                    
					                                  </div>
					                                  <div id="performance-line-legend"></div>
					                                </div>
					                                <div class="chartjs-wrapper mt-5">
					                                  <canvas id="performaneLine"></canvas>
					                                </div>
					                              </div>
					                            </div>
					                          </div>
					                        </div>
					                      </div>

					                    </div>
					                    <!--<div class="row">
					                      <div class="col-lg-8 d-flex flex-column">
					                        <div class="row flex-grow">
					                          <div class="col-12 grid-margin stretch-card">
					                            <div class="card card-rounded">
					                              <div class="card-body">
					                                <div class="d-sm-flex justify-content-between align-items-start">
					                                  <div>
					                                    <h4 class="card-title card-title-dash">Market Overview</h4>
					                                    <p class="card-subtitle card-subtitle-dash">Lorem ipsum dolor sit amet consectetur
					                                      adipisicing elit</p>
					                                  </div>
					                                  <div>
					                                    <div class="dropdown">
					                                      <button class="btn btn-secondary dropdown-toggle toggle-dark btn-lg mb-0 me-0"
					                                        type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown"
					                                        aria-haspopup="true" aria-expanded="false"> This month </button>
					                                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
					                                        <h6 class="dropdown-header">Settings</h6>
					                                        <a class="dropdown-item" href="#">Action</a>
					                                        <a class="dropdown-item" href="#">Another action</a>
					                                        <a class="dropdown-item" href="#">Something else here</a>
					                                        <div class="dropdown-divider"></div>
					                                        <a class="dropdown-item" href="#">Separated link</a>
					                                      </div>
					                                    </div>
					                                  </div>
					                                </div>
					                                <div class="d-sm-flex align-items-center mt-1 justify-content-between">
					                                  <div class="d-sm-flex align-items-center mt-4 justify-content-between">
					                                    <h2 class="me-2 fw-bold">$36,2531.00</h2>
					                                    <h4 class="me-2">USD</h4>
					                                    <h4 class="text-success">(+1.37%)</h4>
					                                  </div>
					                                  <div class="me-3">
					                                    <div id="marketing-overview-legend"></div>
					                                  </div>
					                                </div>
					                                <div class="chartjs-bar-wrapper mt-3">
					                                  <canvas id="marketingOverview"></canvas>
					                                </div>
					                              </div>
					                            </div>
					                          </div>
					                        </div>
					                      </div>
					                      <div class="col-lg-4 d-flex flex-column">
					                        <div class="row flex-grow">
					                          <div class="col-12 grid-margin stretch-card">
					                            <div class="card card-rounded">
					                              <div class="card-body">
					                                <div class="row">
					                                  <div class="col-lg-12">
					                                    <div class="d-flex justify-content-between align-items-center mb-3">
					                                      <h4 class="card-title card-title-dash">Type By Amount</h4>
					                                    </div>
					                                    <canvas class="my-auto" id="doughnutChart" height="200"></canvas>
					                                    <div id="doughnut-chart-legend" class="mt-5 text-center"></div>
					                                  </div>
					                                </div>
					                              </div>
					                            </div>
					                          </div>
					                        </div>


					                      </div>
					                    </div>-->
					                  </div>
					                </div>
					              </div>
					            </div>
					          </div>
                </div>
                <!-- content-wrapper ends -->
                <!-- partial:partials/_footer.html -->

                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"  crossorigin="anonymous"></script>
    <!-- plugins:js -->
    <script th:src="@{/vendors/js/vendor.bundle.base.js}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script th:src="@{/vendors/chart.js/Chart.min.js}"></script>
    <script th:src="@{/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js}"></script>
    <script th:src="@{/vendors/progressbar.js/progressbar.min.js}"></script>

    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script th:src="@{/js/off-canvas.js}"></script>
    <script th:src="@{/js/hoverable-collapse.js}"></script>
    <script th:src="@{/js/template.js}"></script>
    <script th:src="@{/js/settings.js}"></script>
    <script th:src="@{/js/todolist.js}"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script th:src="@{/js/jquery.cookie.js}" type="text/javascript"></script>
    <!--<script th:src="@{/js/dashboard.js}"></script>-->
    <script th:src="@{/js/Chart.roundedBarCharts.js}"></script>
    <!-- End custom js for this page-->
	
	<script th:inline="javascript">
		/*<![CDATA[*/
		(function ($) {
		  'use strict';
		  $(function () {
		    if ($("#performaneLine").length) {
		      var graphGradient = document.getElementById("performaneLine").getContext('2d');
		      var graphGradient2 = document.getElementById("performaneLine").getContext('2d');
		      var saleGradientBg = graphGradient.createLinearGradient(5, 0, 5, 100);
		      saleGradientBg.addColorStop(0, 'rgba(255, 0, 69, 0.18)');
		      saleGradientBg.addColorStop(1, 'rgba(255, 0, 69, 0.02)');
		      var saleGradientBg2 = graphGradient2.createLinearGradient(100, 0, 50, 150);
		      saleGradientBg2.addColorStop(0, 'rgba(84, 99, 169, 0.19)');
		      saleGradientBg2.addColorStop(1, 'rgba(84, 99, 169, 0.03)');
			  
			  // Récupérez les données dynamiques du modèle
			  var daysInsight = /*[[${daysInsight}]]*/ []  // Utilisez Thymeleaf pour injecter les données JSON
			  var declinedDaysInsight = /*[[${declinedDaysInsight}]]*/ []  // Utilisez Thymeleaf pour injecter les données JSON
			  
			  // Extraire les dates et les valeurs des données
              var labels = daysInsight.map(insight => insight.date);
              var data = daysInsight.map(insight => insight.count);
			  
			  var declinedLabels = declinedDaysInsight.map(insight => insight.date);
			  var declinedData = declinedDaysInsight.map(insight => insight.count);
			  
		      var salesTopData = {
		        labels: labels,
		        datasets: [{
		          label: 'Accepted',
		          data: data,
		          backgroundColor: saleGradientBg,
		          borderColor: [
		            '#c2003f',
		          ],
		          borderWidth: 1.5,
		          fill: true, // 3: no fill
		          pointBorderWidth: 1,
		          pointRadius: [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
		          pointHoverRadius: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
		          pointBackgroundColor: ['#c2003f)', '#c2003f', '#c2003f', '#c2003f', '#c2003f)', '#c2003f', '#c2003f', '#c2003f', '#c2003f)', '#c2003f', '#c2003f', '#c2003f', '#c2003f)'],
		          pointBorderColor: ['#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff',],
		        },			  {
	            label: 'Declined',
	            data: declinedData,
	            backgroundColor: saleGradientBg2,
	            borderColor: [
	              '#5463a9',
	            ],
	            borderWidth: 1.5,
	            fill: true, // 3: no fill
	            pointBorderWidth: 1,
	            pointRadius: [0, 0, 0, 4, 0],
	            pointHoverRadius: [0, 0, 0, 2, 0],
	            pointBackgroundColor: ['#5463a9)', '#5463a9', '#5463a9', '#5463a9', '#5463a9)', '#5463a9', '#5463a9', '#5463a9', '#5463a9)', '#5463a9', '#5463a9', '#5463a9', '#5463a9)'],
	            pointBorderColor: ['#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff', '#fff',],
	          }]
		      };

		      var salesTopOptions = {
		        responsive: true,
		        maintainAspectRatio: false,
		        scales: {
		          yAxes: [{
		            gridLines: {
		              display: true,
		              drawBorder: false,
		              color: "#F0F0F0",
		              zeroLineColor: '#F0F0F0',
		            },
		            ticks: {
		              beginAtZero: false,
		              autoSkip: true,
		              maxTicksLimit: 4,
		              fontSize: 10,
		              color: "#c2003f"
		            }
		          }],
		          xAxes: [{
		            gridLines: {
		              display: false,
		              drawBorder: false,
		            },
		            ticks: {
		              beginAtZero: false,
		              autoSkip: true,
		              maxTicksLimit: 7,
		              fontSize: 10,
		              color: "#c2003f"
		            }
		          }],
		        },
		        legend: false,
		        legendCallback: function (chart) {
		          var text = [];
		          text.push('<div class="chartjs-legend"><ul>');
		          for (var i = 0; i < chart.data.datasets.length; i++) {
		            console.log(chart.data.datasets[i]); // see what's inside the obj.
		            text.push('<li>');
		            text.push('<span style="background-color:' + chart.data.datasets[i].borderColor + '">' + '</span>');
		            text.push(chart.data.datasets[i].label);
		            text.push('</li>');
		          }
		          text.push('</ul></div>');
		          return text.join("");
		        },

		        elements: {
		          line: {
		            tension: 0.4,
		          }
		        },
		        tooltips: {
		          backgroundColor: 'rgba(31, 59, 179, 1)',
		        }
		      }
		      var salesTop = new Chart(graphGradient, {
		        type: 'line',
		        data: salesTopData,
		        options: salesTopOptions
		      });
		      document.getElementById('performance-line-legend').innerHTML = salesTop.generateLegend();
		    }
		    

		  });
		})(jQuery);
		/*]]>*/
	</script>
</body>

</html>